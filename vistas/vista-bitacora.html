<div class="form-group col-lg-6">
    <label for="pacnombre">Nombre(s) <a>*</a></label>
        <input type="text" class="form-control" name="pacnombre" id="pacnombre"  placeholder="" onkeypress="return soloLetras(event)" />
</div>

<div class="form-group col-lg-6">
    <label for="pacapellido">Apellido(s) <a>*</a></label>
        <input type="text" class="form-control" id="pacapellido" placeholder="" onkeypress="return soloLetras(event)" />
</div>

<div class="form-group col-lg-6">
    <label for="pacsexo"><i class="fa fa-male bigger-110"></i> Sexo <a>*</a></label>
        <select class="form-control " id="pacsexo">
            <option value=""> Seleccionar sexo</option>
            <option value="M">Masculino</option>
            <option value="F">Femenino</option>
        </select>
</div>

<div class="form-group col-lg-6">
    <label for="pacfecha"><i class="fa fa-calendar bigger-110"></i> Fecha de Nacimiento <a>*</a></label>
        <input class="form-control date-picker input-mask-date"
        id="pacfecha" type="text"  data-date-format="dd/mm/yyyy">
</div>

<input type="hidden" id="fechaactual" value="<?php echo date("Y");?>" />

<div class="form-group col-lg-6">
    <label for="pacdui"><i class="fa fa-credit-card bigger-110"></i>DUI</label>
        <input type="text" class="form-control" id="pacdui" name="pacdui" placeholder="" />
</div>

<div class="form-group col-lg-6">
    <label for="paccorreo"><i class="ace-icon fa fa-envelope"></i> Email </label>
        <input type="text" class="form-control" id="paccorreo" name="paccorreo" placeholder="" />
</div>

<div class="form-group col-lg-6">
    <label for="pactelefonop"><i class="ace-icon fa fa-phone"></i> Teléfono Primario</label>
        <input class="form-control input-mask-phone" type="text" id="pactelefonop"name="pactelefonop" />
</div>

<div class="form-group col-lg-6">
    <label for="pactelefonos"><i class="ace-icon fa fa-phone"></i> Teléfono Secundario <a> </a></label>
        <input class="form-control input-mask-phone" type="text" id="pactelefonos" name="pactelefonos" />
</div>

<div class="form-group col-lg-12">
    <label for="pacdireccion"><i class="ace-icon fa fa-home"></i>Direcci�n</label>
        <input type="text" class="form-control" id="pacdireccion" name="pacdireccion" placeholder="" />
</div>

<div class="form-group col-lg-6">
    <label for="resnombre">Nombre(s) Resposable <a>*</a></label>
        <input type="text" class="form-control" name="resnombre" id="resnombre"  placeholder="" onkeypress="return soloLetras(event)" />
</div>

<div class="form-group col-lg-6">
    <label for="resapellido">apellido(s) Resposable <a>*</a></label>
        <input type="text" class="form-control" name="resapelldo" id="resapelldo"  placeholder="" onkeypress="return soloLetras(event)" />
</div>

<div class="form-group col-lg-6">
    <label for="resrelacion"><i class="fa fa-male bigger-110"></i> Relación <a>*</a></label>
        <select class="form-control " id="resrelacion">
            <option value=""> Seleccionar la Relacion</option>
            <option value="MADRE">MADRE</option>
            <option value="PADRE">PADRE</option>
        </select>
</div>

<div class="form-group col-lg-6">
    <label for="restelefonop"><i class="ace-icon fa fa-phone"></i> Teléfono Primario</label>
        <input class="form-control input-mask-phone" type="text" id="restelefonop"name="restelefonop" />
</div>

<div class="form-group col-lg-6">
    <label for="restelefonos"><i class="ace-icon fa fa-phone"></i> Teléfono Secundario</label>
        <input class="form-control input-mask-phone" type="text" id="restelefonos"name="restelefonos" />
</div>



$idpaciente=mainModel::obtener_identificador_clinico($nexpediente);

				if($resnombre!="" && $resapellido!="" && $resrelacion!=""){

				$dataAD=[
					"idpaciente"=>$idpaciente,						
					"resnombre"=>$resnombre,	
					"resapellido"=>$resapellido,
					"resrelacion"=>$resrelacion,
					"resdui"=>$resdui,				
					"restelefonop"=>$restelefonop,
					"restelefonos"=>$restelefonos
					];

				$guardarResponsable=pacienteModelo::agregar_responsable_modelo($dataAD);

				if ($guardarResponsable->rowCount()>=1) {

				$alerta=[
					"Alerta"=>"limpiar",
					"Titulo"=>"Paciente Registrado",
					"Texto"=>"El paciente se registro con exito",
					"Tipo"=>"success",
					"form"=>"formpac"
				];
				}

				}else{

					$alerta=[
						"Alerta"=>"simple",
						"Titulo"=>"Ocurrio un Error Inesperado",
						"Texto"=>"No hemos podido registrar el Responsable",
						"Tipo"=>"error"
						
					];
					
				}
            
                


                $dataAD=[
						"idpaciente"=>$idpaciente,						
						"resnombre"=>$resnombre,	
						"resapellido"=>$resapellido,
						"resrelacion"=>$resrelacion,
						"resdui"=>$resdui,				
						"restelefonop"=>$restelefonop,
						"restelefonos"=>$restelefonos
						];
	
					$guardarResponsable=pacienteModelo::agregar_responsable_modelo($dataAD);
					
					if ($guardarResponsable->rowCount()>=1) {

						$alerta=[
							"Alerta"=>"limpiar",
							"Titulo"=>"Paciente & Responsable Registrados",
							"Texto"=>"El paciente & Responsable se registraron con exito",
							"Tipo"=>"success",
							"form"=>"formpac"
						];
						}
		
						}else{
		
							$alerta=[
								"Alerta"=>"simple",
								"Titulo"=>"Ocurrio un Error Inesperado",
								"Texto"=>"No hemos podido registrar el Responsable",
								"Tipo"=>"error"
								
							];
							
						}




				}else{
					$alerta=[
						"Alerta"=>"limpiar",
						"Titulo"=>"Paciente Registrado",
						"Texto"=>"El paciente se registro con exito",
						"Tipo"=>"success",
						"form"=>"formpac"
					];
				}



































				----------------
				

function soloNumeros(e)
{
var keynum = window.event ? window.event.keyCode : e.which;
if ((keynum == 8) || (keynum == 46))
return true;
return /\d/.test(String.fromCharCode(keynum));

}

function soloLetras(e){
    key = e.keyCode || e.which;
    tecla = String.fromCharCode(key).toLowerCase();
    letras = " áéíóúabcdefghijklmnñopqrstuvwxyz";
    especiales = "8-37-39-46";

    tecla_especial = false
    for(var i in especiales){
         if(key == especiales[i]){
             tecla_especial = true;
             break;
         }
     }

     if(letras.indexOf(tecla)==-1 && !tecla_especial){
         return false;
     }
}

function ExtraerDatosMod(){
    alert('se modifica los datos');
}
function DarBajaPaciente(){
    alert('se dara de baja al paciente');
}

jQuery(function ($) {


 function obteneredad(){
    var anio=document.getElementById("fechaactual").value;
    var pacanio=document.getElementById("pacfecha").value.substr(6,9);

    var edad=parseInt(anio,10)-parseInt(pacanio,10);

    return edad;
    
}

$("#pacfecha" ).change(function() {

    var ob1=$('#ob1');
   
    var ob2=$('#ob2');
   
    var ob3=$('#ob3');

  if(obteneredad()>=18){
    document.getElementById("pacdui").disabled=false;
    document.getElementById("resnombre").disabled=false;
    document.getElementById("resapellido").disabled=false;
    document.getElementById("resrelacion").disabled=false;
    document.getElementById("restelefonop").disabled=false;
    document.getElementById("resdui").disabled=false;
    document.getElementById("restelefonos").disabled=false;
    ob1.css("visibility","hidden");
    ob2.css("visibility","hidden");
    ob3.css("visibility","hidden");
    
  }
  if(obteneredad()<18){
    document.getElementById("pacdui").value="";
    ob1.css("visibility","visible");
    ob2.css("visibility","visible");
    ob3.css("visibility","visible");
    document.getElementById("pacdui").disabled=true;
    document.getElementById("resnombre").disabled=false;
    document.getElementById("resapellido").disabled=false;
    document.getElementById("resrelacion").disabled=false;
    document.getElementById("restelefonop").disabled=false;
    document.getElementById("resdui").disabled=false;
    document.getElementById("restelefonos").disabled=false;
  }

});

$( "#btnguardar" ).click(function() {
    var nombre=$('#pacnombre');
    var apellido=$('#pacapellido');
    var sexo=$('#pacsexo');
    var dui=$('#pacdui');
    var fecha=$('#pacfecha');
    var alert=$('#alerta');


    var resnombre=$('#resnombre');
    var resapellido=$('#resapellido');
    var relacion=$('#resrelacion');
   
    
   

    if(nombre.val()==""){
        nombre.css("border-color","red");
        alert.css("visibility","visible");
    }else{
        nombre.css("border-color","");
        alert.css("visibility","hidden");
    }

    if(apellido.val()==""){
        apellido.css("border-color","red");
        alert.css("visibility","visible");
    }else{
        apellido.css("border-color","");
        alert.css("visibility","hidden");
    }

    if(sexo.val()==""){
        sexo.css("border-color","red");
        alert.css("visibility","visible");
    }else{
        sexo.css("border-color","");
        alert.css("visibility","hidden");
    }

    if(fecha.val()==""){
        fecha.css("border-color","red");
        alert.css("visibility","visible");
        document.getElementById("pacdui").disabled=fale;
    }else{
        fecha.css("border-color","");
        alert.css("visibility","hidden");
        document.getElementById("pacdui").disabled=true;
    }


    if(fecha.val()!=""){
    if(resnombre.val()=="" && obteneredad()<18  ){
        resnombre.css("border-color","red");
        alert.css("visibility","visible")
        
    }else{
        resnombre.css("border-color","");
        alert.css("visibility","hidden");
    }
    if(resapellido.val()=="" && obteneredad()<18 ){
        resapellido.css("border-color","red");
        alert.css("visibility","visible");
    }else{
        resapellido.css("border-color","");
        alert.css("visibility","hidden");
    }
    if(relacion.val()=="" && obteneredad()<18 ){
        relacion.css("border-color","red");
        alert.css("visibility","visible");
        
    }else{
        relacion.css("border-color","");
        alert.css("visibility","hidden");
    }
}
    

        
        
    
    if(fecha.val!=""){
    if(nombre.val()!="" && apellido.val()!="" && sexo.val()!="" && fecha.val()!="" &&  obteneredad()>=18){
        enviardatos();
    }

    if(resnombre.val()!="" && resapellido.val()!="" && relacion.val()!="" && nombre.val()!="" && apellido.val()!="" && sexo.val()!="" && fecha.val()!="" && obteneredad()<18){
        enviardatos();
    }
}

});





     

    
 



    function enviardatos(){



    var pacfecha=$("#pacfecha").val();

    var fechan=pacfecha.substr(6,9)+'-'+pacfecha.substr(4,5)+'-'+pacfecha.substr(0,1);



    var form=$('#formpac');

    var tipo=form.attr('data-form');
    var accion=form.attr('action');
    var metodo=form.attr('method');
    var respuesta=form.children('.RespuestaAjax');

    var msjError="<script>swal('Ocurrió un error inesperado','Por favor recargue la página','error');</script>";
    


    var textoAlerta;
    if(tipo==="save"){
        textoAlerta="Los datos que enviaras quedaran almacenados en el sistema";
    }else if(tipo==="delete"){
        textoAlerta="Los datos serán eliminados completamente del sistema";
    }else if(tipo==="update"){
        textoAlerta="Los datos del sistema serán actualizados";
    }else{
        textoAlerta="Quieres realizar la operación solicitada";
    }


    swal({
        title: "¿Estás seguro?",   
        text: textoAlerta,   
        type: "question",   
        showCancelButton: true,     
        confirmButtonText: "Aceptar",
        cancelButtonText: "Cancelar"
    }).then(function () {
        edadx=obteneredad();
        $.ajax({
            method: metodo,
            url: accion,
            data: { pacnombre: $("#pacnombre").val(), pacapellido: $('#pacapellido').val(),
                    pacsexo: $('#pacsexo').val(),pacfecha : $('#pacfecha').val()
                    ,pacdui : $('#pacdui').val(),pacdireccion : $('#pacdireccion').val()
                    ,paccorreo : $('#paccorreo').val(),pactelefonop : $('#pactelefonop').val()
                    ,pactelefonos : $('#pactelefonos').val(),pacfecha : fechan
                    ,resnombre: $("#resnombre").val(), resapellido: $('#resapellido').val()
                    ,resrelacion: $("#resrelacion").val(), restelefonop: $('#restelefonop').val() 
                    ,restelefonos: $('#restelefonos').val()
                    ,edad: edadx
                    ,resdui: $("#resdui").val(),accion : tipo  }
          })
            .done(function( msg ) {
              $("#respuesta").html(msg);
              actualizardatos();
            });
        return false;
    });
}

function actualizardatos(){


    $.ajax({
        method: "POST",
        url: "http://localhost/SICMEDIC/ajax/pacienteAjax.php",
        data: { accion : "alltabla"  }
      })
        .done(function( msg ) {
          $("#tabla").html(msg);
        });

}





    





    var $sidebar = $('.sidebar').eq(0);
    if (!$sidebar.hasClass('h-sidebar')) return;

    $(document).on('settings.ace.top_menu', function (ev, event_name, fixed) {
        if (event_name !== 'sidebar_fixed') return;

        var sidebar = $sidebar.get(0);
        var $window = $(window);

        //return if sidebar is not fixed or in mobile view mode
        var sidebar_vars = $sidebar.ace_sidebar('vars');
        if (!fixed || (sidebar_vars['mobile_view'] || sidebar_vars['collapsible'])) {
            $sidebar.removeClass('lower-highlight');
            //restore original, default marginTop
            sidebar.style.marginTop = '';

            $window.off('scroll.ace.top_menu')
            return;
        }


        var done = false;
        $window.on('scroll.ace.top_menu', function (e) {

            var scroll = $window.scrollTop();
            scroll = parseInt(scroll / 4); //move the menu up 1px for every 4px of document scrolling
            if (scroll > 17) scroll = 17;


            if (scroll > 16) {
                if (!done) {
                    $sidebar.addClass('lower-highlight');
                    done = true;
                }
            } else {
                if (done) {
                    $sidebar.removeClass('lower-highlight');
                    done = false;
                }
            }

            sidebar.style['marginTop'] = (17 - scroll) + 'px';
        }).triggerHandler('scroll.ace.top_menu');

    }).triggerHandler('settings.ace.top_menu', ['sidebar_fixed', $sidebar.hasClass('sidebar-fixed')]);

    $(window).on('resize.ace.top_menu', function () {
        $(document).triggerHandler('settings.ace.top_menu', ['sidebar_fixed', $sidebar.hasClass('sidebar-fixed')]);
    });
    // para cargar componenete popover que muestra +datos de paciente
    $('[data-rel=popover]').popover({
        html: true
    });

    $('[data-rel=tooltip]').tooltip();

    $('.date-picker').datepicker({
        
        autoclose: true,
        endDate: $('#fechaactual').val()
    });

    $.mask.definitions['~'] = '[+-]';

    $('.telefono').mask('9999-9999');
    $('.dui').mask('99999999-9');
    $('.input-mask-date').mask('99/99/9999');
    
    

});





						  

						  


						  

						  
					 

					  <div class="hidden-md hidden-lg">
						  <div class="inline pos-rel">
							  <button
								  class="btn btn-minier btn-yellow dropdown-toggle"
								  data-toggle="dropdown"
								  data-position="auto">
								  <i
									  class="ace-icon fa fa-caret-down icon-only bigger-120"></i>
							  </button>

							  <ul
								  class="dropdown-menu dropdown-only-icon dropdown-yellow dropdown-menu-right dropdown-caret dropdown-close">
								  <li>
									  <a href="#"
										  class="tooltip-info"
										  data-rel="tooltip"
										  title=""
										  data-original-title="View">
										  <span class="blue">
											  <i
												  class="ace-icon fa fa-search-plus bigger-120"></i>
										  </span>
									  </a>
								  </li>

								  <li>
									  <a href="#"
										  class="tooltip-success"
										  data-rel="tooltip"
										  title=""
										  data-original-title="Edit">
										  <span class="green">
											  <i
												  class="ace-icon fa fa-pencil-square-o bigger-120"></i>
										  </span>
									  </a>
								  </li>

								  <li>
									  <a href="#"
										  class="tooltip-error"
										  data-rel="tooltip"
										  title=""
										  data-original-title="Delete">
										  <span class="red">
											  <i
												  class="ace-icon fa fa-trash-o bigger-120"></i>
										  </span>
									  </a>
								  </li>
							  </ul>
						  </div>
					  </div>